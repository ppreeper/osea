

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>[source,bash] &#8212; Enterprise Architecture  documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="how_to_install_hyperledger_fabric_on_ubuntu.html" />
    <link rel="prev" title="&lt;no title&gt;" href="how_to_fund_your_startup_without_venture_capital.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="how_to_install_hyperledger_fabric_on_ubuntu.html" title="&lt;no title&gt;"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="how_to_fund_your_startup_without_venture_capital.html" title="&lt;no title&gt;"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Enterprise Architecture  documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">[source,bash]</a></li>
<li><a class="reference internal" href="#sudo-nano-etc-fstab">sudo nano /etc/fstab</a></li>
<li><a class="reference internal" href="#id1">[source,bash]</a></li>
<li><a class="reference internal" href="#tmpfs-run-shm-tmpfs-defaults-noexec-nosuid-0-0">tmpfs /run/shm tmpfs defaults,noexec,nosuid 0 0</a></li>
<li><a class="reference internal" href="#id2">[source,bash]</a></li>
<li><a class="reference internal" href="#allowusers-192-168-1">AllowUsers <em>&#64;192.168.1.</em></a></li>
<li><a class="reference internal" href="#id3">[source,bash]</a></li>
<li><a class="reference internal" href="#id4">[source,bash]</a></li>
<li><a class="reference internal" href="#banner-etc-issue-net">Banner /etc/issue.net</a></li>
<li><a class="reference internal" href="#id5">[source,bash]</a></li>
<li><a class="reference internal" href="#sudo-service-ssh-restart">sudo service ssh restart</a></li>
<li><a class="reference internal" href="#id6">[source,bash]</a></li>
<li><a class="reference internal" href="#id7">[source,bash]</a></li>
<li><a class="reference internal" href="#id8">[source,bash]</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="how_to_fund_your_startup_without_venture_capital.html"
                        title="previous chapter">&lt;no title&gt;</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="how_to_install_hyperledger_fabric_on_ubuntu.html"
                        title="next chapter">&lt;no title&gt;</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/misc/How to harden Ubuntu Server 16.04 security in five steps.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>= How to harden Ubuntu Server 16.04 security in five steps
By Jack Wallen | February 6, 2017, 1:47 PM PST</p>
<p>If you’re ready to take your Ubuntu Server security to the next level, read these five quick tips.</p>
<p>You have that shiny new Ubuntu 16.04 LTS Server up and running. The installation was far easier than you anticipated, and you’re ready to enjoy all the incredible security that comes with Linux.</p>
<p>There’s actually more you can do to achieve an adequate level of security for your data. The good news is it’s pretty easy to harden your Ubuntu 16.04 Server. See how five quick steps will result in considerable security gains.</p>
<p>== 1: Secure shared memory</p>
<p>Shared memory can be used in an attack against a running service, so it is always best to secure that portion of memory. You can do this by modifying the /etc/fstab file.</p>
<p>First, you must open the file for editing by issuing the command:</p>
<div class="section" id="source-bash">
<h1>[source,bash]<a class="headerlink" href="#source-bash" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="sudo-nano-etc-fstab">
<h1>sudo nano /etc/fstab<a class="headerlink" href="#sudo-nano-etc-fstab" title="Permalink to this headline">¶</a></h1>
<p>Next, add the following line to the bottom of that file:</p>
</div>
<div class="section" id="id1">
<h1>[source,bash]<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="tmpfs-run-shm-tmpfs-defaults-noexec-nosuid-0-0">
<h1>tmpfs /run/shm tmpfs defaults,noexec,nosuid 0 0<a class="headerlink" href="#tmpfs-run-shm-tmpfs-defaults-noexec-nosuid-0-0" title="Permalink to this headline">¶</a></h1>
<p>Save and close the file. In order for the changes to take effect, you must reboot the server.</p>
<p>== 2: Enable ssh login for specific users</p>
<p>You’ll probably spend a good amount of time secure shelling into that Ubuntu Server. Because you’ll need to enter that server via ssh, you do not want to leave it wide open.</p>
<p>One thing you should do is enable ssh login for specific users. Let’s say you want to only allow secure shell entry for the user olivia, from IP address 192.168.1.152. Here’s how you would do this.</p>
<p>. Open a terminal window.
. Open the ssh config file for editing with the command sudo nano /etc/ssh/sshd_config.
. At the bottom of the file, add the line AllowUsers <a class="reference external" href="mailto:olivia&#37;&#52;&#48;192&#46;168&#46;1&#46;152">olivia<span>&#64;</span>192<span>&#46;</span>168<span>&#46;</span>1<span>&#46;</span>152</a>.
. Save and close the file.
. Restart sshd with the command sudo service ssh restart.</p>
<p>At this point, secure shell will only allow entry by user olivia, from IP address 192.168.1.152. If someone other than olivia attempts to ssh into the server, they will be prompted for a password, but the password will not be accepted (even if it’s correct), and entrance will be denied.</p>
<p>You can modify this to fit your needs. Say you want to allow all users on your network to be able to access the server via ssh. You would add the following line:</p>
</div>
<div class="section" id="id2">
<h1>[source,bash]<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="allowusers-192-168-1">
<h1>AllowUsers <em>&#64;192.168.1.</em><a class="headerlink" href="#allowusers-192-168-1" title="Permalink to this headline">¶</a></h1>
<p>Restart the ssh server, and you’re good to go.</p>
<p>== 3: Add a security login banner</p>
<p>Adding a security login banner might seem like it would have zero effect on your server, but if an unwanted user gains access to your server, and if they see you’ve taken the time to set up a login banner warning them of consequences, they might think twice about continuing. Yes, it’s purely psychological, but it’s such an easy step, it shouldn’t be overlooked. Here’s how to manage this.</p>
<p>Create your new banner by following these steps.</p>
<p>. Open a terminal window.
. Issue the command sudo nano /etc/issue.net.
. Edit the file to add a suitable warning.
. Save and close the file.</p>
<p>Next, we need to disable the banner message from motd. To do this you must open a terminal and issue the command sudo nano /etc/pam.d/sshd. With this file open for editing, comment out the following two lines (adding a # to the beginning of each line):</p>
</div>
<div class="section" id="id3">
<h1>[source,bash]<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h1>
<p>session optional pam_motd.so motd=/run/motd.dynamic
​session optional pam_motd.so noupdate
—-</p>
<p>Now open the /etc/ssh/sshd_config in your favorite text editor and comment out the line:</p>
</div>
<div class="section" id="id4">
<h1>[source,bash]<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="banner-etc-issue-net">
<h1>Banner /etc/issue.net<a class="headerlink" href="#banner-etc-issue-net" title="Permalink to this headline">¶</a></h1>
<p>Save and close that file.</p>
<p>Finally, restart the ssh server with the command:</p>
</div>
<div class="section" id="id5">
<h1>[source,bash]<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="sudo-service-ssh-restart">
<h1>sudo service ssh restart<a class="headerlink" href="#sudo-service-ssh-restart" title="Permalink to this headline">¶</a></h1>
<p>At this point, anytime someone logs into your server, via ssh, they will see your newly added banner displayed to warn them you are watching.</p>
<p>== 4: Harden the networking layer</p>
<p>There is a very simple way to prevent source routing of incoming packets (and log all malformed IPs) on your Ubuntu Server. Open a terminal window, issue the command sudo nano /etc/sysctl.conf, and uncomment or add the following lines:</p>
</div>
<div class="section" id="id6">
<h1>[source,bash]<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h1>
<p>= IP Spoofing protection
​net.ipv4.conf.all.rp_filter = 1
​net.ipv4.conf.default.rp_filter = 1
​
​# Ignore ICMP broadcast requests
​net.ipv4.icmp_echo_ignore_broadcasts = 1
​
​# Disable source packet routing
​net.ipv4.conf.all.accept_source_route = 0
​net.ipv6.conf.all.accept_source_route = 0
​net.ipv4.conf.default.accept_source_route = 0
​net.ipv6.conf.default.accept_source_route = 0
​
​# Ignore send redirects
​net.ipv4.conf.all.send_redirects = 0
​net.ipv4.conf.default.send_redirects = 0
​
​# Block SYN attacks
​net.ipv4.tcp_syncookies = 1
​net.ipv4.tcp_max_syn_backlog = 2048
​net.ipv4.tcp_synack_retries = 2
​net.ipv4.tcp_syn_retries = 5
​
​# Log Martians
​net.ipv4.conf.all.log_martians = 1
​net.ipv4.icmp_ignore_bogus_error_responses = 1
​
​# Ignore ICMP redirects
​net.ipv4.conf.all.accept_redirects = 0
​net.ipv6.conf.all.accept_redirects = 0
​net.ipv4.conf.default.accept_redirects = 0
​net.ipv6.conf.default.accept_redirects = 0
​
​# Ignore Directed pings
​net.ipv4.icmp_echo_ignore_all = 1
—-</p>
<p>Save and close the file, and then restart the service with the command sudo sysctl -p.</p>
<p>== 5: Prevent IP spoofing</p>
<p>This one is quite simple and will go a long way to prevent your server’s IP from being spoofed. Open a terminal window and issue the command sudo nano /etc/host.conf. With this file open for editing, it will look like:</p>
</div>
<div class="section" id="id7">
<h1>[source,bash]<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h1>
<p>= The “order” line is only used by old versions of the C library.
​order hosts,bind
​multi on
—-</p>
<p>Change the content of this file to:</p>
</div>
<div class="section" id="id8">
<h1>[source,bash]<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h1>
<p>= The “order” line is only used by old versions of the C library.
​order bind,hosts
​nospoof on
—-</p>
<p>Save and close that file. Viola! No more IP spoofing.</p>
<p>== More ways to secure your server</p>
<p>We have only scratched the surface of hardening your Ubuntu 16.04 Server, but these five tips will provide you with a significant upgrade to your server’s security. We’ll explore this topic soon and continue the practice of locking down your Ubuntu Server platform.</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="how_to_install_hyperledger_fabric_on_ubuntu.html" title="&lt;no title&gt;"
             >next</a> |</li>
        <li class="right" >
          <a href="how_to_fund_your_startup_without_venture_capital.html" title="&lt;no title&gt;"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Enterprise Architecture  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Peter Preeper.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>